---
import VideoScrollSection from "../components/VideoScrollSection.astro";

const pageTitle = "VideoScrollSection ç»„ä»¶æµ‹è¯•";
---

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{pageTitle}</title>
  
  <!-- Lenis CSS -->
  <link rel="stylesheet" href="https://unpkg.com/lenis@1.3.8/dist/lenis.css" />
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }
    
    .test-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px 20px;
      text-align: center;
    }
    
    .section-before {
      background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
    }
    
    .section-after {
      background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
    }
    
    .test-content {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .test-title {
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 700;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, #c9a962 0%, #e8d5a3 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .test-subtitle {
      font-size: clamp(1rem, 2.5vw, 1.5rem);
      color: #aaa;
      margin-bottom: 2rem;
      line-height: 1.6;
    }
    
    .test-info {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 24px;
      margin-top: 2rem;
      text-align: left;
    }
    
    .test-info h3 {
      color: #c9a962;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
    
    .test-info ul {
      list-style: none;
      padding: 0;
    }
    
    .test-info li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .test-info li:last-child {
      border-bottom: none;
    }
    
    .info-label {
      color: #888;
      font-size: 0.9rem;
    }
    
    .info-value {
      color: #fff;
      font-weight: 500;
      font-family: monospace;
    }
    
    .status-indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #4ade80;
      margin-right: 8px;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .scroll-hint {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #666;
      animation: bounce 2s ease-in-out infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .console-hint {
      background: rgba(201, 169, 98, 0.1);
      border: 1px solid rgba(201, 169, 98, 0.3);
      border-radius: 8px;
      padding: 16px;
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #e8d5a3;
    }
    
    .console-hint code {
      background: rgba(0, 0, 0, 0.3);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <!-- æµ‹è¯•å‰åŒºåŸŸ -->
  <section class="test-section section-before">
    <div class="test-content">
      <h1 class="test-title">VideoScrollSection æµ‹è¯•</h1>
      <p class="test-subtitle">
        è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæµ‹è¯• VideoScrollSection ç»„ä»¶çš„é¡µé¢<br>
        åŒ…å« Lenis å¹³æ»‘æ»šåŠ¨é›†æˆ
      </p>
      
      <div class="test-info">
        <h3><span class="status-indicator"></span>æµ‹è¯•ç¯å¢ƒ</h3>
        <ul>
          <li>
            <span class="info-label">Lenis å¹³æ»‘æ»šåŠ¨</span>
            <span class="info-value">âœ“ å·²å¯ç”¨</span>
          </li>
          <li>
            <span class="info-label">GSAP ScrollTrigger</span>
            <span class="info-value">âœ“ å·²é›†æˆ</span>
          </li>
          <li>
            <span class="info-label">è§†é¢‘æº</span>
            <span class="info-value">/Dynamic_Embrace_Animation_Generation.mp4</span>
          </li>
          <li>
            <span class="info-label">æ»šåŠ¨è·ç¦»</span>
            <span class="info-value">3x è§†å£é«˜åº¦</span>
          </li>
          <li>
            <span class="info-label">Scrub é€Ÿåº¦</span>
            <span class="info-value">0.5</span>
          </li>
          <li>
            <span class="info-label">è°ƒè¯•æ¨¡å¼</span>
            <span class="info-value">âœ“ å·²å¼€å¯</span>
          </li>
        </ul>
      </div>
      
      <div class="console-hint">
        ğŸ’¡ æç¤ºï¼šæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—<br>
        ä½ åº”è¯¥çœ‹åˆ° <code>ğŸ” [Lenis Detection]</code> å’Œ <code>ğŸ”— [Lenis Sync]</code> ç›¸å…³æ—¥å¿—
      </div>
      
      <div class="scroll-hint">
        â†“ å‘ä¸‹æ»šåŠ¨æŸ¥çœ‹è§†é¢‘ â†“
      </div>
    </div>
  </section>

  <!-- VideoScrollSection ç»„ä»¶ -->
  <VideoScrollSection 
    videoSrc="/Dynamic_Embrace_Animation_Generation.mp4"
    title="çˆ±çš„æ‹¥æŠ±"
    subtitle="æµ‹è¯•è§†é¢‘æ»šåŠ¨æ•ˆæœ - åº”è¯¥å¹³æ»‘è·Ÿéšæ»šåŠ¨æ’­æ”¾"
    scrollDistance={3}
    scrubSpeed={0.5}
    showDebug={true}
  />

  <!-- æµ‹è¯•ååŒºåŸŸ -->
  <section class="test-section section-after">
    <div class="test-content">
      <h2 class="test-title">æµ‹è¯•å®Œæˆ</h2>
      <p class="test-subtitle">
        å¦‚æœè§†é¢‘æ­£å¸¸è·Ÿéšæ»šåŠ¨æ’­æ”¾ï¼Œè¯´æ˜ç»„ä»¶å·¥ä½œæ­£å¸¸
      </p>
      
      <div class="test-info">
        <h3>âœ“ éªŒè¯æ¸…å•</h3>
        <ul>
          <li>
            <span class="info-label">è§†é¢‘è·Ÿéšæ»šåŠ¨æ’­æ”¾</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
          <li>
            <span class="info-label">å‘ä¸‹æ»šåŠ¨ - æ­£å‘æ’­æ”¾</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
          <li>
            <span class="info-label">å‘ä¸Šæ»šåŠ¨ - é€†å‘æ’­æ”¾</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
          <li>
            <span class="info-label">æ»šåŠ¨å¹³æ»‘æµç•…</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
          <li>
            <span class="info-label">è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
          <li>
            <span class="info-label">æ§åˆ¶å°æ— é”™è¯¯</span>
            <span class="info-value">æ£€æŸ¥ âœ“</span>
          </li>
        </ul>
      </div>
      
      <div class="console-hint">
        ğŸ“Š è°ƒè¯•ä¿¡æ¯åº”è¯¥æ˜¾ç¤ºåœ¨è§†é¢‘ä¸Šæ–¹ï¼ŒåŒ…æ‹¬ï¼š<br>
        â€¢ çŠ¶æ€ï¼ˆè¿›å…¥åŒºåŸŸã€æ’­æ”¾ä¸­ã€ç¦»å¼€åŒºåŸŸï¼‰<br>
        â€¢ è¿›åº¦ï¼ˆ0% - 100%ï¼‰<br>
        â€¢ æ—¶é—´ï¼ˆå½“å‰æ—¶é—´ / æ€»æ—¶é•¿ï¼‰
      </div>
      
      <div class="scroll-hint">
        â†‘ å‘ä¸Šæ»šåŠ¨é‡æ–°ä½“éªŒ â†‘
      </div>
    </div>
  </section>

  <!-- Lenis å¹³æ»‘æ»šåŠ¨è„šæœ¬ -->
  <script>
    import Lenis from "lenis";

    console.log('ğŸš€ [Test Page] åˆå§‹åŒ– Lenis å¹³æ»‘æ»šåŠ¨...');

    const lenis = new Lenis({
      lerp: 0.08,
      duration: 1.5,
      smoothWheel: true,
      syncTouch: false,
      wheelMultiplier: 0.8,
      autoRaf: false,
    });

    // æš´éœ²åˆ°å…¨å±€ï¼Œä¾› VideoScrollSection æ£€æµ‹
    window.lenis = lenis;
    console.log('âœ… [Test Page] Lenis å®ä¾‹å·²æš´éœ²åˆ° window.lenis');

    function raf(time: number) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }

    requestAnimationFrame(raf);
    console.log('âœ… [Test Page] Lenis RAF å¾ªç¯å·²å¯åŠ¨');

    // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ˆå¯é€‰ï¼Œç”¨äºè°ƒè¯•ï¼‰
    lenis.on('scroll', (e) => {
      // console.log('ğŸ“œ [Test Page] Scroll:', e.scroll.toFixed(2));
    });
  </script>
</body>
</html>
